<script>
const reviewList = document.getElementById('reviewList');
const filterType = document.getElementById('filterType');

const API_URL = "https://script.google.com/macros/s/AKfycbySjG_vNHYgE1AOslpmQf-awFutxeMJn2eq_MJhs92B2wAR_8EcdPINhkBscfGgBfHf/exec";

function loadReviews() {
    reviewList.innerHTML = "Loading...";

    fetch(API_URL)
        .then(res => res.json())
        .then(data => {
            reviewList.innerHTML = "";

            if (!data || data.length === 0) {
                reviewList.innerHTML = "<p>Belum ada review.</p>";
                return;
            }

            data.forEach(item => {
                const type = item.review?.toLowerCase();

                if (filterType.value === 'all' || type === filterType.value) {
                    const card = document.createElement('div');
                    card.className = 'review-card';

                    const badgeClass = type === 'review' ? 'review' : 'keluhan';

                    card.innerHTML = `
                        <span class="badge ${badgeClass}">
                            ${item.review}
                        </span>
                        <h3>${item.yuni}</h3>
                        <p>${item.pelayanannya}</p>
                        <small>${item.timestamp || ''}</small>
                    `;

                    reviewList.appendChild(card);
                }
            });
        })
        .catch(err => {
            reviewList.innerHTML = "<p>Gagal memuat data</p>";
            console.error(err);
        });
}

filterType.addEventListener('change', loadReviews);
loadReviews();
</script>
